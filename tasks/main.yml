# -*- coding: utf-8 -*-
# tasks for  ansible-role-tmuxinator
---
- name: Ensure group "rbenvgrp" exists
  group:
    name: rbenvgrp
    state: present

- name: Check groups that user belongs to already
  shell: "groups"
  failed_when: false
  changed_when: false
  check_mode: no
  become: yes
  become_user: "{{bossjones__tmuxinator__user}}"
  register: bossjones__tmuxinator_user_groups

- debug:
    var: bossjones__tmuxinator_user_groups.stdout | replace(" ", ",")


- name: "Add the user {{bossjones__tmuxinator__user}}, appending the group 'rbenvgrp' to the user's groups"
  user:
    name: "{{bossjones__tmuxinator__user}}"
    groups: "rbenvgrp"
    append: yes
